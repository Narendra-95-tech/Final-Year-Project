<% layout("/layouts/boilerplate") -%>

<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-200">
  <script type="application/json" id="listing-data">
    <%- JSON.stringify(listing) %>
  </script>

  <div class="container mx-auto px-4 py-8 max-w-7xl">
    <!-- Breadcrumb -->
    <nav class="mb-6" aria-label="Breadcrumb">
      <ol class="flex items-center space-x-2 text-sm">
        <li><a href="/" class="text-orange-500 hover:underline">Home</a></li>
        <li class="text-gray-500">/</li>
        <li class="text-gray-500"><%= listing.title %></li>
      </ol>
    </nav>

    <!-- Title and Location -->
    <div class="mb-6">
      <h1 class="text-3xl md:text-4xl font-bold text-gray-900 dark:text-white mb-2"><%= listing.title %></h1>
      <div class="flex items-center text-gray-600 dark:text-gray-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        <span><%= listing.location %>, <%= listing.country %></span>
      </div>
    </div>

    <!-- Image Gallery -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 mb-8">
      <div class="lg:col-span-2">
        <div class="relative rounded-2xl overflow-hidden h-96 bg-gray-200 dark:bg-gray-700">
          <img src="<%= listing.image.url %>" alt="<%= listing.title %>" class="w-full h-full object-cover transition-transform duration-300 hover:scale-105">
          <div class="absolute top-4 right-4">
            <button class="p-2 bg-white dark:bg-gray-800 rounded-full shadow-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
              </svg>
            </button>
          </div>
        </div>
      </div>
      <div class="grid grid-cols-2 gap-2">
        <% for(let i = 0; i < 4; i++) { %>
          <div class="h-44 bg-gray-200 dark:bg-gray-700 rounded-xl overflow-hidden">
            <img src="<%= listing.image.url %>" alt="Gallery image <%= i+1 %>" class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
          </div>
        <% } %>
      </div>
    </div>

    <!-- Main Content -->
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
      <!-- Left Column -->
      <div class="lg:col-span-2">
        <!-- Listing Details -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 mb-6">
          <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-4">About this place</h2>
          <p class="text-gray-600 dark:text-gray-300 mb-6"><%= listing.description %></p>
          
          <div class="grid grid-cols-2 md:grid-cols-3 gap-4 mb-6">
            <div class="flex items-center">
              <div class="p-3 bg-orange-50 dark:bg-gray-700 rounded-lg mr-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                </svg>
              </div>
              <div>
                <div class="text-sm text-gray-500 dark:text-gray-400">Type</div>
                <div class="font-medium text-gray-900 dark:text-white">Entire place</div>
              </div>
            </div>
            <div class="flex items-center">
              <div class="p-3 bg-orange-50 dark:bg-gray-700 rounded-lg mr-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857L12 20.364l-1.318-1.318a3 3 0 00-5.356 1.857l-6 6a3 3 0 006 3z" />
                </svg>
              </div>
              <div>
                <div class="text-sm text-gray-500 dark:text-gray-400">Guests</div>
                <div class="font-medium text-gray-900 dark:text-white">Up to <%= listing.capacity || 4 %> guests</div>
              </div>
            </div>
            <div class="flex items-center">
              <div class="p-3 bg-orange-50 dark:bg-gray-700 rounded-lg mr-3">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" />
                </svg>
              </div>
              <div>
                <div class="text-sm text-gray-500 dark:text-gray-400">Price</div>
                <div class="font-medium text-gray-900 dark:text-white">₹<%= listing.price.toLocaleString("en-IN") %> <span class="text-sm text-gray-500">/ night</span></div>
              </div>
            </div>
          </div>

          <div class="border-t border-gray-200 dark:border-gray-700 pt-6">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Amenities</h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
              <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <span class="text-gray-600 dark:text-gray-300">Free WiFi</span>
              </div>
              <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <span class="text-gray-600 dark:text-gray-300">Air Conditioning</span>
              </div>
              <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <span class="text-gray-600 dark:text-gray-300">Kitchen</span>
              </div>
              <div class="flex items-center">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-500 mr-2" viewBox="0 0 20 20" fill="currentColor">
                  <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                </svg>
                <span class="text-gray-600 dark:text-gray-300">Free Parking</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Calendar Section Removed -->

        <!-- Host Information -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 mb-6">
          <div class="flex items-center mb-4">
            <div class="h-16 w-16 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden mr-4">
              <img src="https://ui-avatars.com/api/?name=<%= listing.owner.username %>&background=fd7e14&color=fff" alt="<%= listing.owner.username %>" class="w-full h-full object-cover">
            </div>
            <div>
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Hosted by <%= listing.owner.username %></h3>
              <p class="text-gray-500 dark:text-gray-400">Superhost · Joined in 2023</p>
            </div>
          </div>
          <p class="text-gray-600 dark:text-gray-300 mb-4">
            I'm a passionate host who loves to welcome guests from around the world. My goal is to make your stay as comfortable and enjoyable as possible.
          </p>
          <button class="text-orange-500 font-medium hover:underline">Contact Host</button>
        </div>

        <!-- Reviews Section -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block -mt-1 mr-1 text-orange-500" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
              </svg>
              4.92 · 24 reviews
            </h2>
            <a href="#reviews" class="text-sm font-medium text-orange-500 hover:underline">View all reviews</a>
          </div>

          <% if(listing.reviews.length > 0) { %>
            <div class="space-y-6">
              <% listing.reviews.slice(0, 2).forEach(review => { %>
                <div class="border-b border-gray-200 dark:border-gray-700 pb-6 last:border-0 last:pb-0">
                  <div class="flex items-center mb-2">
                    <div class="h-10 w-10 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden mr-3">
                      <img src="https://ui-avatars.com/api/?name=<%= review.author.username %>&background=fd7e14&color=fff" alt="<%= review.author.username %>" class="w-full h-full object-cover">
                    </div>
                    <div>
                      <h4 class="font-medium text-gray-900 dark:text-white"><%= review.author.username %></h4>
                      <div class="flex items-center">
                        <% for(let i = 1; i <= 5; i++) { %>
                          <svg class="w-4 h-4 <%= i <= review.rating ? 'text-orange-500' : 'text-gray-300' %>" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                          </svg>
                        <% } %>
                        <span class="text-sm text-gray-500 ml-2"><%= new Date(review.createdAt).toLocaleDateString() %></span>
                      </div>
                    </div>
                  </div>
                  <p class="text-gray-600 dark:text-gray-300"><%= review.comment %></p>
                </div>
              <% }) %>
            </div>
          <% } else { %>
            <p class="text-gray-500 italic">No reviews yet. Be the first to review this property!</p>
          <% } %>

      <!-- Right Column - Booking Card -->
      <div class="lg:sticky lg:top-6 lg:h-fit">
        <!-- Owner Manage Buttons -->
        <% if(currUser && listing.owner._id.equals(currUser._id)) { %>
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-sm p-6 mb-6">
            <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Manage Listing</h3>
            <div class="space-y-3">
              <a href="/listings/<%= listing._id %>/edit" class="flex items-center justify-center px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                </svg>
                Edit Listing
              </a>
              <form method="POST" action="/listings/<%= listing._id %>?_method=DELETE" class="m-0">
                <button type="submit" class="w-full flex items-center justify-center px-4 py-2 border border-red-500 text-red-500 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                  </svg>
                  Delete Listing
                </button>
              </form>
            </div>
          </div>
        <% } %>

<!-- Booking Form -->
        <% if(currUser && !listing.owner._id.equals(currUser._id)) { %>
          <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-lg border border-gray-200 dark:border-gray-700 overflow-hidden sticky top-6">
            <div class="p-6">
              <div class="flex justify-between items-start mb-4">
                <div>
                  <p class="text-2xl font-bold text-gray-900 dark:text-white">₹<%= listing.price.toLocaleString("en-IN") %> <span class="text-base font-normal text-gray-500">night</span></p>
                  <div class="flex items-center text-sm text-gray-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    <span>Free cancellation before check-in</span>
                  </div>
                </div>
                <div class="flex items-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-orange-500" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                  </svg>
                  <span class="ml-1 font-medium">4.92</span>
                  <span class="text-gray-500 ml-1">(24)</span>
                </div>
              </div>

              <form id="bookingForm" class="space-y-4">
                <div class="grid grid-cols-2 gap-4">
                  <div>
                    <label for="startDate" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Check-in</label>
                    <div class="relative">
                      <input type="date" name="startDate" id="startDate" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-700 dark:text-white" required>
                      <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                      </div>
                    </div>
                  </div>
                  <div>
                    <label for="endDate" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Check-out</label>
                    <div class="relative">
                      <input type="date" name="endDate" id="endDate" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-700 dark:text-white" required>
                      <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                      </div>
                    </div>
                  </div>
                </div>

                <div>
                  <label for="guests" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Guests</label>
                  <div class="relative">
                    <select name="guests" id="guests" class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-orange-500 dark:bg-gray-700 dark:text-white appearance-none" required>
                      <% for(let i = 1; i <= 10; i++) { %>
                        <option value="<%= i %>" <%= i === 1 ? 'selected' : '' %>><%= i %> <%= i === 1 ? 'guest' : 'guests' %></option>
                      <% } %>
                    </select>
                    <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
                      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                      </svg>
                    </div>
                  </div>
                </div>

                <button type="submit" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                  </svg>
                  Book Now
                </button>

                <p class="text-center text-sm text-gray-500">You won't be charged yet</p>
              </form>

              <div class="mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                <div class="flex justify-between mb-2">
                  <span class="text-gray-600 dark:text-gray-300">₹<%= listing.price.toLocaleString("en-IN") %> x 5 nights</span>
                  <span class="text-gray-900 dark:text-white">₹<%= (listing.price * 5).toLocaleString("en-IN") %></span>
                </div>
                <div class="flex justify-between mb-2">
                  <span class="text-gray-600 dark:text-gray-300">Cleaning fee</span>
                  <span class="text-gray-900 dark:text-white">₹500</span>
                </div>
                <div class="flex justify-between mb-2">
                  <span class="text-gray-600 dark:text-gray-300">Service fee</span>
                  <span class="text-gray-900 dark:text-white">₹1,200</span>
                </div>
                <div class="flex justify-between mt-4 pt-4 border-t border-gray-200 dark:border-gray-700 font-semibold">
                  <span>Total</span>
                  <span>₹<%= (listing.price * 5 + 500 + 1200).toLocaleString("en-IN") %></span>
                </div>
              </div>
            </div>
          </div>
        <% } %>
    </div>
  </div>

      </div>
    </div>
  </div>

<!-- Calendar Section Removed -->

<!-- Booking & Payment Script -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('bookingForm');
      if(form) {
        // Set min date for check-in to today
        const today = new Date();
        const tomorrow = new Date(today);
        tomorrow.setDate(tomorrow.getDate() + 1);
        
        const startDateInput = document.getElementById('startDate');
        const endDateInput = document.getElementById('endDate');
        
        // Format date as YYYY-MM-DD
        const formatDate = (date) => {
          return date.toISOString().split('T')[0];
        };
        
        // Set min dates
        startDateInput.min = formatDate(today);
        endDateInput.min = formatDate(tomorrow);
        
        // Update end date min when start date changes
        startDateInput.addEventListener('change', function() {
          if (this.value) {
            const nextDay = new Date(this.value);
            nextDay.setDate(nextDay.getDate() + 1);
            endDateInput.min = formatDate(nextDay);
            
            // If end date is before new min, clear it
            if (endDateInput.value && new Date(endDateInput.value) < nextDay) {
              endDateInput.value = '';
            }
          }
        });
        
        // Form submission
        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          
          const startDate = startDateInput.value;
          const endDate = endDateInput.value;
          const guests = document.getElementById('guests').value;
          
          if (!startDate || !endDate) {
            alert('Please select both check-in and check-out dates');
            return;
          }
          
          const start = new Date(startDate);
          const end = new Date(endDate);
          
          if (end <= start) {
            alert('Check-out date must be after check-in date');
            return;
          }
          
          try {
            const res = await fetch(`/bookings/<%= listing._id %>/book-and-pay`, {
              method: 'POST',
              headers: { 
                'Content-Type': 'application/json',
                'Accept': 'application/json'
              },
              body: JSON.stringify({ 
                startDate, 
                endDate, 
                guests,
                listingId: '<%= listing._id %>'
              })
            });
            
            const data = await res.json();
            
            if (data.sessionUrl) {
              window.location.href = data.sessionUrl; // Redirect to Stripe Checkout
            } else if (data.error) {
              // Show error in a nice way
              const errorDiv = document.createElement('div');
              errorDiv.className = 'mt-4 p-3 bg-red-50 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded-lg';
              errorDiv.textContent = data.error;
              form.prepend(errorDiv);
              
              // Remove error after 5 seconds
              setTimeout(() => {
                errorDiv.remove();
              }, 5000);
            }
          } catch (error) {
            console.error('Booking error:', error);
            alert('An error occurred while processing your booking. Please try again.');
          }
        });
      }
      
      // Initialize datepickers with more options if needed
      // You can use a library like flatpickr for better date selection
    });
    
    // Add smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({
            behavior: 'smooth',
            block: 'start'
          });
        }
      });
    });
  </script>
</body>
