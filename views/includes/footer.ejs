<style>
  /* ===== PREMIUM FOOTER V2 DESIGN ===== */
  footer {
    background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
    color: #e2e8f0;
    margin-top: auto;
    padding: 5rem 0 2rem 0;
    position: relative;
    overflow: hidden;
    font-family: 'Plus Jakarta Sans', sans-serif;
  }

  /* Subtle Pattern Overlay */
  footer::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image:
      radial-gradient(circle at 15% 50%, rgba(254, 66, 77, 0.08) 0%, transparent 25%),
      radial-gradient(circle at 85% 30%, rgba(66, 133, 244, 0.08) 0%, transparent 25%);
    pointer-events: none;
  }

  /* Top Gradient Border */
  footer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, #ff385c, #d90b3e, #ff385c);
    background-size: 200% 100%;
    animation: gradientShift 4s ease-in-out infinite;
    box-shadow: 0 0 15px rgba(255, 56, 92, 0.5);
  }

  @keyframes gradientShift {

    0%,
    100% {
      background-position: 0% 50%;
    }

    50% {
      background-position: 100% 50%;
    }
  }

  /* Brand Section */
  .footer-brand {
    font-weight: 800;
    font-size: 1.8rem;
    color: #ff385c !important;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1.25rem;
    letter-spacing: -0.5px;
  }

  .footer-brand i {
    font-size: 2rem;
    filter: drop-shadow(0 0 8px rgba(255, 56, 92, 0.4));
  }

  .footer-description {
    color: #94a3b8;
    font-size: 0.95rem;
    line-height: 1.7;
    margin-bottom: 2rem;
    max-width: 350px;
  }

  /* Newsletter Box */
  .newsletter-box {
    background: rgba(255, 255, 255, 0.03);
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 1.5rem;
    border-radius: 16px;
    backdrop-filter: blur(10px);
    margin-bottom: 2rem;
  }

  .newsletter-title {
    font-weight: 700;
    color: #fff;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .newsletter-input-group {
    position: relative;
    display: flex;
    gap: 0.5rem;
    margin-top: 1rem;
  }

  .newsletter-input {
    background: rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
    color: #fff;
    padding: 0.75rem 1rem;
    border-radius: 12px;
    width: 100%;
    outline: none;
    transition: all 0.3s ease;
  }

  .newsletter-input:focus {
    border-color: #ff385c;
    box-shadow: 0 0 0 3px rgba(255, 56, 92, 0.15);
  }

  .newsletter-btn {
    background: #ff385c;
    color: white;
    border: none;
    width: 45px;
    height: 45px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s ease;
    flex-shrink: 0;
  }

  .newsletter-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(255, 56, 92, 0.3);
  }

  /* Headings & Links */
  .footer-heading {
    color: #fff;
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 1.5rem;
  }

  .footer-links {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .footer-link {
    color: #94a3b8;
    text-decoration: none;
    font-size: 0.95rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.85rem;
    transition: all 0.2s ease;
  }

  .footer-link:hover {
    color: #ff385c;
    transform: translateX(5px);
  }

  /* App Buttons */
  .app-buttons {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .app-btn {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    background: rgba(255, 255, 255, 0.05);
    border: 1px solid rgba(255, 255, 255, 0.1);
    padding: 0.6rem 1rem;
    border-radius: 12px;
    text-decoration: none;
    color: #fff;
    transition: all 0.3s ease;
  }

  .app-btn:hover {
    background: rgba(255, 255, 255, 0.1);
    transform: translateY(-2px);
    border-color: rgba(255, 255, 255, 0.2);
  }

  .app-btn i {
    font-size: 1.5rem;
  }

  .app-btn-text span {
    display: block;
    font-size: 0.7rem;
    color: #94a3b8;
    line-height: 1;
  }

  .app-btn-text strong {
    font-size: 0.9rem;
    font-weight: 600;
  }

  /* Social Links with Glow */
  .social-links {
    display: flex;
    gap: 0.75rem;
    margin-top: 1.5rem;
  }

  .social-link {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.05);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .social-link:hover {
    transform: translateY(-4px) scale(1.1);
  }

  .social-link.fb:hover {
    background: #1877f2;
    border-color: #1877f2;
    box-shadow: 0 4px 15px rgba(24, 119, 242, 0.4);
  }

  .social-link.tw:hover {
    background: #1da1f2;
    border-color: #1da1f2;
    box-shadow: 0 4px 15px rgba(29, 161, 242, 0.4);
  }

  .social-link.ig:hover {
    background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
    border-color: transparent;
    box-shadow: 0 4px 15px rgba(220, 39, 67, 0.4);
  }

  .social-link.li:hover {
    background: #0077b5;
    border-color: #0077b5;
    box-shadow: 0 4px 15px rgba(0, 119, 181, 0.4);
  }

  /* Footer Bottom */
  .footer-bottom {
    margin-top: 4rem;
    padding-top: 2rem;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1.5rem;
  }

  .payment-methods {
    display: flex;
    gap: 0.5rem;
    font-size: 1.5rem;
    color: #94a3b8;
  }

  .payment-methods i {
    transition: color 0.3s;
  }

  .payment-methods i:hover {
    color: #fff;
  }

  /* Back to Top */
  .back-to-top {
    position: fixed;
    bottom: 30px;
    right: 30px;
    width: 50px;
    height: 50px;
    background: #ff385c;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    cursor: pointer;
    box-shadow: 0 4px 15px rgba(255, 56, 92, 0.4);
    transition: all 0.3s ease;
    opacity: 0;
    visibility: hidden;
    z-index: 1000;
    border: none;
  }

  .back-to-top.visible {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
  }

  .back-to-top:hover {
    transform: translateY(-5px);
    background: #e31c5f;
  }

  @media (max-width: 768px) {
    .footer-bottom {
      flex-direction: column;
      text-align: center;
    }
  }
</style>

<footer>
  <div class="container">
    <div class="row g-5">
      <!-- Brand & Newsletter -->
      <div class="col-lg-4 col-md-12">
        <a class="footer-brand" href="/">
          <i class="fas fa-compass"></i>
          WanderLust
        </a>
        <p class="footer-description">
          Discover unique stays, authentic dhabas, and seamless vehicle rentals. Your all-in-one platform for
          unforgettable journeys.
        </p>

        <!-- Newsletter -->
        <div class="newsletter-box">
          <div class="newsletter-title">
            <i class="fas fa-envelope-open-text text-warning"></i>
            Subscribe for Travel Deals
          </div>
          <form class="newsletter-input-group flex-column" id="newsletterForm">
            <div class="d-flex gap-3 mb-2 small text-white-50">
              <label class="d-flex align-items-center gap-1 cursor-pointer">
                <input type="checkbox" name="preferences" value="listings" checked> Homes
              </label>
              <label class="d-flex align-items-center gap-1 cursor-pointer">
                <input type="checkbox" name="preferences" value="dhabas" checked> Dhabas
              </label>
              <label class="d-flex align-items-center gap-1 cursor-pointer">
                <input type="checkbox" name="preferences" value="vehicles" checked> Cars
              </label>
            </div>
            <div class="d-flex w-100 gap-2">
              <input type="email" name="email" class="newsletter-input" placeholder="Enter your registered email..."
                required>
              <button type="submit" class="newsletter-btn">
                <i class="fas fa-paper-plane"></i>
              </button>
            </div>
          </form>
          <div id="newsletterMsg" class="mt-2 small" style="display:none;"></div>

          <script>
            document.getElementById('newsletterForm').addEventListener('submit', async function (e) {
              e.preventDefault();
              const input = this.querySelector('input[name="email"]');
              const btn = this.querySelector('button');
              const msg = document.getElementById('newsletterMsg');

              // Collect preferences
              const prefs = Array.from(this.querySelectorAll('input[name="preferences"]:checked')).map(cb => cb.value);

              const originalContent = btn.innerHTML;

              btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
              btn.disabled = true;
              msg.style.display = 'none';

              try {
                const res = await fetch('/subscribe', {
                  method: 'POST',
                  headers: {
                    'Content-Type': 'application/json',
                    'Accept': 'application/json'
                  },
                  body: JSON.stringify({
                    email: input.value,
                    preferences: prefs
                  })
                });

                console.log("Fetch status:", res.status); // Debug log

                // Handle non-JSON responses (like 500 pages)
                const contentType = res.headers.get("content-type");
                let data;
                if (contentType && contentType.indexOf("application/json") !== -1) {
                  data = await res.json();
                } else {
                  throw new Error("Server returned non-JSON response: " + res.status);
                }

                msg.style.display = 'block';
                if (data.success) {
                  msg.style.setProperty('color', '#10b981', 'important');
                  // Show promo code if available
                  msg.innerHTML = data.code
                    ? `Success! Code: <strong style="color:#fff; background:#10b981; padding:2px 6px; border-radius:4px;">${data.code}</strong> sent to email!`
                    : 'Success! Check your email.';
                  input.value = '';
                  btn.innerHTML = '<i class="fas fa-check"></i>';
                } else {
                  msg.style.color = '#ef4444';
                  msg.textContent = data.message || 'Something went wrong.';
                  btn.innerHTML = originalContent;
                }
              } catch (err) {
                msg.style.display = 'block';
                msg.style.color = '#ef4444';
                msg.textContent = 'Server error. Try again.';
                btn.innerHTML = originalContent;
              } finally {
                btn.disabled = false;
                setTimeout(() => {
                  if (btn.innerHTML.includes('check')) btn.innerHTML = originalContent;
                  msg.style.display = 'none';
                }, 3000);
              }
            });
          </script>
        </div>

        <div class="social-links">
          <a href="#" class="social-link fb"><i class="fab fa-facebook-f"></i></a>
          <a href="#" class="social-link ig"><i class="fab fa-instagram"></i></a>
          <a href="#" class="social-link tw"><i class="fab fa-twitter"></i></a>
          <a href="#" class="social-link li"><i class="fab fa-linkedin-in"></i></a>
        </div>
      </div>

      <!-- Quick Links -->
      <div class="col-lg-2 col-md-4 col-6">
        <h5 class="footer-heading">Discover</h5>
        <ul class="footer-links">
          <li><a href="/listings" class="footer-link">Homes</a></li>
          <li><a href="/dhabas" class="footer-link">Dhabas</a></li>
          <li><a href="/vehicles" class="footer-link">Vehicles</a></li>
          <li><a href="/search" class="footer-link">Search</a></li>
        </ul>
      </div>

      <!-- Support -->
      <div class="col-lg-2 col-md-4 col-6">
        <h5 class="footer-heading">Support</h5>
        <ul class="footer-links">
          <li><a href="/bookings/my-bookings" class="footer-link">My Bookings</a></li>
          <li><a href="/trip-planner" class="footer-link">AI Trip Planner</a></li>
          <li><a href="/map" class="footer-link">Explore Map</a></li>
          <li><a href="mailto:<%= process.env.EMAIL_USER || 'help@wanderlust.com' %>" class="footer-link">Contact Us</a>
          </li>
        </ul>
      </div>

      <!-- Legal -->
      <div class="col-lg-2 col-md-4 col-6">
        <h5 class="footer-heading">Legal</h5>
        <ul class="footer-links">
          <li><a href="/privacy-policy" class="footer-link">Privacy Policy</a></li>
          <li><a href="/terms" class="footer-link">Terms of Service</a></li>
          <li><a href="/sitemap.xml" class="footer-link" target="_blank">Sitemap</a></li>
        </ul>
        <div class="mt-3">
          <span class="footer-link" style="font-size:0.8rem; opacity:0.6;"><i class="fas fa-shield-alt me-1"></i>SSL
            Secured</span><br>
          <span class="footer-link" style="font-size:0.8rem; opacity:0.6;"><i class="fas fa-lock me-1"></i>PCI
            Compliant</span>
        </div>
      </div>

      <!-- Get the App -->
      <div class="col-lg-4 col-md-4">
        <h5 class="footer-heading">Get the App</h5>
        <p class="text-white-50 small mb-3">Download for the best experience.</p>
        <div class="app-buttons">
          <a href="#" class="app-btn">
            <i class="fab fa-apple"></i>
            <div class="app-btn-text">
              <span>Download on the</span>
              <strong>App Store</strong>
            </div>
          </a>
          <a href="#" class="app-btn">
            <i class="fab fa-google-play"></i>
            <div class="app-btn-text">
              <span>GET IT ON</span>
              <strong>Google Play</strong>
            </div>
          </a>
        </div>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="footer-bottom">
      <div class="copyright">
        <p class="mb-0 text-white-50 small">&copy; <%= new Date().getFullYear() %> WanderLust Pvt Ltd. All rights
            reserved.</p>
        <div class="d-flex align-items-center gap-3 mt-2 text-white-50 small">
          <a href="/privacy-policy" class="text-reset text-decoration-none hover-white">Privacy Policy</a>
          <span>•</span>
          <a href="/terms" class="text-reset text-decoration-none hover-white">Terms of Service</a>
          <span>•</span>
          <a href="/sitemap.xml" class="text-reset text-decoration-none hover-white" target="_blank">Sitemap</a>
          <span>•</span>
          <a href="tel:+919860182371" class="text-reset text-decoration-none hover-white"><i
              class="fas fa-phone-alt me-1"></i>+91 98601 82371</a>
        </div>
      </div>

      <!-- Trust Badges -->
      <div class="payment-methods">
        <i class="fab fa-cc-visa" title="Visa"></i>
        <i class="fab fa-cc-mastercard" title="Mastercard"></i>
        <i class="fab fa-cc-amex" title="Amex"></i>
        <i class="fab fa-stripe" title="Stripe"></i>
        <i class="fab fa-google-pay" title="Google Pay" style="font-size:1.4rem;"></i>
        <i class="fas fa-lock" title="Secure SSL" style="font-size: 1rem; margin-left:10px; opacity:0.7;"></i>
      </div>
    </div>
  </div>
</footer>

<!-- Back to Top Button -->
<button class="back-to-top" id="backToTop" title="Back to Top">
  <i class="fas fa-arrow-up"></i>
</button>

<script>
  // Back to Top Logic
  const backToTopBtn = document.getElementById('backToTop');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 300) {
      backToTopBtn.classList.add('visible');
    } else {
      backToTopBtn.classList.remove('visible');
    }
  });

  backToTopBtn.addEventListener('click', () => {
    window.scrollTo({
      top: 0,
      behavior: 'smooth'
    });
  });
</script>